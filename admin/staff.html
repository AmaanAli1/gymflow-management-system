<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Staff Mangement - GymFlow</title>

        <!-- Font Awesome Icons -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

        <!-- ============================================
             MODULAR CSS IMPORTS
             Shared across all admin pages
             ============================================ -->
        <!-- Design tokens (colors, spacing, typography) -->
        <link rel="stylesheet" href="../css/variables.css">

        <!-- Base styles (resets, body, fundamentals) -->
        <link rel="stylesheet" href="../css/base.css">

        <!-- Layout (sidebar, topbar, main content structure) -->
        <link rel="stylesheet" href="../css/layout.css">

        <!-- Reusable components -->
        <link rel="stylesheet" href="../css/components/buttons.css">
        <link rel="stylesheet" href="../css/components/cards.css">
        <link rel="stylesheet" href="../css/components/modals.css">
        <link rel="stylesheet" href="../css/components/tables.css">
        <link rel="stylesheet" href="../css/components//slide-panel.css">

        <!-- Page-Specific Styles -->
        <link rel="stylesheet" href="../css/pages/staff.css">
        <link rel="stylesheet" href="../css/components/staff-schedule.css">
    </head>
    <body>

        <!-- ============================================ 
             SIDEBAR NAVIGATION
             Shared across all pages
             ============================================ -->
        <aside class="sidebar">
            <!-- Sidebar Header (Logo + Pin Button) -->
            <div class="sidebar-header">
                <div class="sidebar-logo-icon">GF</div>
                <div class="sidebar-logo-text">GymFlow</div>

                <button class="sidebar-pin-btn" id="sidebarPinBtn" 
                        title="Pin / Unpin sidebar" 
                        aria-label="Toggle sidebar pin">
                    <i class="fa-solid fa-thumbtack"></i>
                </button>
            </div>

            <!-- ============================================
                 NAVIGATION MENU
                 ============================================ -->
            <nav class="sidebar-nav">
                <!-- Dashboard -->
                <a href="./dashboard.html" class="nav-item">
                    <i class="fa-solid fa-house"></i>
                    <span>Dashboard</span>
                </a>

                <!-- Members (Active/Expanded) -->
                <div class="nav-group">
                    <a href="#" class="nav-item has-sub" aria-expanded="false">
                        <i class="fa-solid fa-users"></i>
                        <span>Members</span>
                        <i class="fa-solid fa-chevron-down caret"></i>
                    </a>
                    <div class="submenu">
                        <a href="./members.html" class="submenu-item" aria-current="page">All Members</a>
                        <a href="#" class="submenu-item" data-modal="add-member-modal">Add Member</a>
                        <a href="#" class="submenu-item" data-modal="checkin-modal">Member Check-In</a>
                    </div>
                </div>

                <!-- Staff -->
                <div class="nav-group">
                    <a href="#" class="nav-item has-sub open" aria-expanded="true">
                        <i class="fa-solid fa-user-gear"></i>
                        <span>Staff</span>
                        <i class="fa-solid fa-chevron-down caret"></i>
                    </a>
                    <div class="submenu">
                        <a href="./staff.html" class="submenu-item active">All Staff</a>
                        <a href="#" class="submenu-item" data-modal="add-staff-modal">Add Staff</a>
                        <a href="#" class="submenu-item" data-modal="add-trainer-modal">Add Trainer</a>
                    </div>
                </div>

                <!-- Inventory -->
                <div class="nav-group">
                    <a href="#" class="nav-item has-sub" aria-expanded="false">
                        <i class="fa-solid fa-box"></i>
                        <span>Inventory</span>
                        <i class="fa-solid fa-chevron-down caret"></i>
                    </a>
                    <div class="submenu">
                        <a href="./inventory.html" class="submenu-item">Stock Overview</a>
                        <a href="./inventory-reorders.html" class="submenu-item">Reorder Requests</a>
                        <a href="./inventory-vendors.html" class="submenu-item">Vendors</a>
                    </div>
                </div>

                <!-- Locations -->
                <div class="nav-group">
                    <a href="./locations.html" class="nav-item has-sub" aria-expanded="false">
                        <i class="fa-solid fa-location-dot"></i>
                        <span>Locations</span>
                        <i class="fa-solid fa-chevron-down caret"></i>
                    </a>
                    <div class="submenu">
                        <a href="./locations.html" class="submenu-item">All Branches</a>
                        <a href="./locations-capacity.html" class="submenu-item">Capacity Overview</a>
                        <a href="./locations-performance.html" class="submenu-item">Performance Stats</a>
                    </div>
                </div>

                <!-- Analytics -->
                <div class="nav-group">
                    <a href="./analytics.html" class="nav-item has-sub" aria-expanded="false">
                        <i class="fa-solid fa-chart-line"></i>
                        <span>Analytics</span>
                        <i class="fa-solid fa-chevron-down caret"></i>
                    </a>
                    <div class="submenu">
                        <a href="./analytics.html" class="submenu-item">Power BI Dashboard</a>
                        <a href="./analytics-revenue.html" class="submenu-item">Revenue Trends</a>
                        <a href="./analytics-retention.html" class="submenu-item">Member Retention</a>
                    </div>
                </div>

                <!-- Settings -->
                <div class="nav-group">
                    <a href="./settings.html" class="nav-item has-sub" aria-expanded="false">
                        <i class="fa-solid fa-gear"></i>
                        <span>Settings</span>
                        <i class="fa-solid fa-chevron-down caret"></i>
                    </a>
                    <div class="submenu">
                        <a href="./settings-profile.html" class="submenu-item">Profile Settings</a>
                        <a href="./settings-preferences.html" class="submenu-item"> App Preferences</a>
                        <a href="./settings-security.html" class="submenu-item">Secruity</a>
                    </div>
                </div>
            </nav>

            <!-- ============================================ 
                 SIDEBAR FOOTER (user Profile + Logout)
                 ============================================ -->
            <div class="sidebar-footer">
                <div class="profile">
                    <img src="https://i.pravatar.cc/40?img=12" alt="Admin Profile Picture">
                    <span class="profile-name">Admin</span>
                </div>
                <button class="logout-btn" aria-label="Logout">
                    <i class="fa-solid fa-right-from-bracket"></i>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- ============================================ 
             MAIN CONTENT AREA
             ============================================ -->
        <div class="main-content">
            <!-- ============================================ 
                TOPBAR
                ============================================ -->
            <header class="topbar">
                <h1>Staff Management</h1>
                <div class="topbar-actions">
                    <button class="topbar-icon-btn" aria-label="Notifications">
                        <i class="fa-regular fa-bell"></i>
                    </button>
                    <img src="https://i.pravatar.cc/100?img=12" alt="Admin" class="topbar-profile">
                </div>
            </header>

            <!-- ============================================ 
                 STAFF PAGE CONTENT
                 ============================================ -->
            <section class="staff-page">

                <!-- ============================================ 
                     TOOLBAR: (Filters + Search + Actions)
                     ============================================ -->
                <div class="staff-toolbar">
                    <!-- Filter Dropdown -->
                    <div class="staff-filters">

                        <!-- Filter by Role -->
                        <select id="filterRole" aria-label="Filter by role">
                            <option value="all">All Roles</option>
                            <option value="Front Desk CSR">Front Desk CSR</option>
                            <option value="Sales">Sales</option>
                            <option value="Operations">Operations</option>
                            <option value="Manager">Manager</option>
                            <option value="Admin">Admin</option>
                        </select>

                        <!-- Filter by Location -->
                        <select id="filterLocation" aria-label="Filter by location">
                            <option value="all">All Locations</option>
                            <!-- Options populate by Javascript from API -->
                        </select>

                        <!-- Filter by Status -->
                        <select id="filterStatus" aria-label="Filter by status">
                            <option value="all">All Status</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="on_leave">On Leave</option>
                            <option value="terminated">Terminated</option>
                        </select>


                    </div>

                    <!-- Right Side: Search + Add Button -->
                    <div class="staff-actions">

                        <!-- Search Bar -->
                        <div class="staff-search">
                            <i class="fa-solid fa-magnifying-glass"></i>
                            <input
                                type="text"
                                id="searchStaff"
                                placeholder="Search by name or email..."
                                aria-label="Search staff">
                        </div>

                        <!-- Add Staff Button -->
                        <button class="add-btn" data-modal="add-staff-modal" aria-label="Add new staff member">
                            <i class="fa-solid fa-plus"></i>
                            Add Staff
                        </button>

                        <!-- Schedule Overview Button -->
                        <button class="add-btn secondary" id="scheduleOverviewBtn" aria-label="View schedule overview">
                            <i class="fa-solid fa-calendar-days"></i>
                            Schedule Overview
                        </button>
                    </div>
                </div>

                <!-- ============================================ 
                     KPI CARDS (Key Performance Indicators)
                     Shows quick stats at a glance
                     ============================================ -->
                <div class="staff-kpi-row">
                    <div class="kpi-card small">
                        <p class="kpi-label">Total Staff</p>
                        <p class="kpi-value" data-stat="totalStaff">---</p>
                        <p class="kpi-sub">All employees</p>
                    </div>
                    <div class="kpi-card small">
                        <p class="kpi-label">New This Month</p>
                        <p class="kpi-value" data-stat="newThisMonth">---</p>
                        <p class="kpi-sub">Compared to last month</p>
                    </div>
                    <div class="kpi-card small">
                        <p class="kpi-label">Active Staff</p>
                        <p class="kpi-value" data-stat="activeStaff">---</p>
                        <p class="kpi-sub">Currently employed</p>
                    </div>
                    <div class="kpi-card small">
                        <p class="kpi-label">By Role</p>
                        <p class="kpi-value" data-stat="cancelledStaff">---</p>
                        <p class="kpi-sub">Role breakdown</p>
                    </div>
                </div>

                <!-- ============================================ 
                     STAFF TABLE
                     ============================================ -->
                <div class="table-container">
                    <table class="data-table" id="staffTable">

                        <!-- Table Header -->
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="staff_id">
                                    Staff ID <i class="fa-solid fa-sort"></i>
                                    <i class="fa-solid fa-sort"></i>
                                </th>
                                <th class="sortable" data-sort="name">
                                    Name
                                    <i class="fa-solid fa-sort"></i>
                                </th>
                                <th class="sortable" data-sort="email">
                                    Email
                                    <i class="fa-solid fa-sort"></i>
                                </th>
                                <th class="sortable" data-sort="email">
                                    Phone
                                    <i class="fa-solid fa-sort"></i>
                                </th>
                                <th class="sortable" data-sort="email">
                                    Role
                                    <i class="fa-solid fa-sort"></i>
                                </th>
                                <th class="sortable" data-sort="email">
                                    Location
                                    <i class="fa-solid fa-sort"></i>
                                </th>
                                <th class="sortable" data-sort="email">
                                    Hire Date
                                    <i class="fa-solid fa-sort"></i>
                                </th>
                                <th class="sortable" data-sort="email">
                                    Status
                                    <i class="fa-solid fa-sort"></i>
                                </th>
                                <th>Actions</th>
                            </tr>
                        </thead>

                        <!-- Table Body (Populated by JavaScript) -->
                        <tbody id="staffTableBody">
                            <!-- Rows inserted here by staff.js -->
                            <tr>
                                <td colspan="9" class="table-loading">
                                    <i class="fa-solid fa-spinner fa-spin"></i>
                                    <p>Loading Staff...</p>
                                </td>
                            </tr>
                        </tbody>

                    </table>
                </div>
            </section>

        </div>

        <!-- ============================================ 
             MODALS
             ============================================ -->
        
        <!-- Add Member Modal -->
        <div class="modal-overlay" id="add-member-modal" aria-hidden="true">
            <div class="modal-card">
                <div class="modal-header">
                    <h2>Add New Member</h2>
                    <button class="modal-close" data-close-modal aria-label="Close modal">&times;</button>
                </div>

                <form id="addMemberForm">
                    <div class="modal-body">
                        <div class="modal-grid">
                            <div class="field">
                                <label for="memberName">Full Name *</label>
                                <input type="text" id="memberName" name="name" required placeholder="John Doe">
                            </div>
                            <div class="field">
                                <label for="memberEmail">Email *</label>
                                <input type="email" id="memberEmail" name="email" required placeholder="john@example.com">
                            </div>
                            <div class="field">
                                <label for="memberPhone">Phone *</label>
                                <input type="tel" id="memberPhone" name="phone" placeholder="(555) 123-4567" required>
                            </div>
                            <div class="field">
                                <label for="memberEmergencyContact">Emergency Contact</label>
                                <input type="tel" id="memberEmergencyContact" name="emergency_contact" placeholder="(555) 987-6543">
                            </div>
                            <div class="field">
                                <label for="memberLocation">Location *</label>
                                <select id="memberLocation" name="location_id" required>
                                    <!-- Options populated by JavaScript -->
                                </select>
                            </div>
                            <div class="field">
                                <label for="memberPlan">Membership Plan *</label>
                                <select id="memberPlan" name="plan" required>
                                    <option value="Basic">Basic</option>
                                    <option value="Premium">Premium</option>
                                    <option value="Elite">Elite</option>
                                </select>
                            </div>
                        </div>
                        <div class="field">
                            <label for="memberNotes">Notes (Optional)</label>
                            <textarea id="memberNotes" name="notes" rows="3" placeholder="Goals, referral source, special requests..."></textarea>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn ghost" data-close-modal>Cancel</button>
                        <button type="submit" class="btn primary">Save Member</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Member Check-In Modal -->
        <div class="modal-overlay" id="checkin-modal" aria-hidden="true">
            <div class="modal-card">
                <div class="modal-header">
                    <h2>Member Check-In</h2>
                    <button class="modal-close" data-close-modal aria-label="Close modal">&times;</button>
                </div>

                <form id="checkinForm">
                    <div class="modal-body">
                        <div class="field">
                            <label for="checkinSearch">Search Member</label>
                            <input type="text" id="checkinSearch" placeholder="Type name, email, or member ID">
                            <!-- Hidden field to store selected member ID -->
                            <input type="hidden" id="checkInMemberId" name="member_id">
                            <!-- Hidden field to store member's home location -->
                            <input type="hidden" id="checkInMemberLocationId">
                        </div>
                        <div class="field">
                            <label for="checkinLocation">Location</label>
                            <select id="checkinLocation" name="location_id">
                                <!-- Options populated by JavaScript -->
                            </select>
                            <!-- Warning message (hidden by default) -->
                            <div id="locationWarning" class="field-warning" style="display: none;">
                                <i class="fa-solid fa-exclamation-triangle"></i>
                                <span>This is not the member's home location</span>
                            </div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn ghost" data-close-modal>Close</button>
                        <button type="submit" class="btn primary" id="confirmCheckInBtn">Confirm Check-In</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Add Trainer Modal -->
        <div class="modal-overlay" id="add-trainer-modal" role="dialog" aria-labelledby="addTrainer Title" aria-hidden="true">
            <div class="modal-card">
                <div class="modal-header">
                    <h2 id="addTrainerTitle">Add Trainer</h2>
                    <button class="modal-close" data-close-modal aria-label="Close modal">&times;</button>
                </div>

                <div class="modal-body">

                    <!-- Error/Success Messages -->
                    <div id="addTrainerError" class="modal-error" style="display: none;"></div>
                    <div id="addTrainerSuccess" class="modal-success" style="display: none;"></div>

                    <form id="addTrainerForm">
                        <div class="modal-grid">
                            <div class="field">
                                <label for="trainerName">Full Name *</label>
                                <input type="text"
                                       id="trainerName"
                                       name="name"
                                       placeholder="Jane Doe"
                                       required>
                            </div>
                            <div class="field">
                                <label for="trainerEmail">Email *</label>
                                <input type="email"
                                       id="trainerEmail"
                                       name="email"
                                       placeholder="jame@gymflow.com"
                                       required>
                            </div>
                            <div class="field">
                                <label for="trainerPhone">Phone *</label>
                                <input type="tel"
                                       id="trainerPhone"
                                       name="phone"
                                       placeholder="(555) 123-4567"
                                       required>
                            </div>
                            <div class="field">
                                <label for="trainerEmergencyContact">Emergency Contact *</label>
                                <input type="text"
                                       id="trainerEmergencyContact"
                                       name="emergency_contact"
                                       placeholder="Jane Doe"
                                       required>
                            </div>
                            <div class="field">
                                <label for="trainerEmergencyPhone">Emergency Phone *</label>
                                <input type="tel"
                                       id="trainerEmergencyPhone"
                                       name="emergency_phone"
                                       placeholder="(555) 123-4567"
                                       required>
                            </div>
                            <div class="field">
                                <label for="trainerLocation">Location *</label>
                                <select id="trainerLocation" name="location_id" required>
                                    <option value="">Select location...</option>
                                    <!-- Options populated by JavaScript-->
                                </select>
                            </div>
                            <div class="field">
                                <label for="trainerSpecialty">Specialty *</label>
                                <select id="trainerSpecialty" name="specialty" required>
                                    <option value="">Select specialty...</option>
                                    <option value="Strength">Strength</option>
                                    <option value="Hypertrophy">Hypertrophy</option>
                                    <option value="Weight Loss">Weight Loss</option>
                                    <option value="Conditioning">Conditioning</option>
                                    <option value="Yoga / Mobility">Yoga / Mobility</option>
                                </select>
                            </div>
                            <div class="field">
                                <label for="trainerHireDate">Hire Date *</label>
                                <input type="data"
                                       id="trainerHireDate"
                                       name="hire_date"
                                       required>
                            </div>
                            <div class="field">
                                <label for="trainerRate">Hourly Rate ($)</label>
                                <input type="number" 
                                       id="trainerRate" 
                                       name="hourly_rate"
                                       placeholder="e.g. 65" 
                                       min="0" 
                                       step="5"
                                       required>
                            </div>
                        </div>
                        <div class="field">
                            <label for="trainerNotes">Notes</label>
                            <textarea id="trainerNotes"
                                      name="notes"
                                      rows="3"
                                      placeholder="Certifications, preferences, languages..."></textarea>
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button class="btn ghost" data-close-modal type="button">Cancel</button>
                    <button class="btn primary" type="submit" form="addTrainerForm" id="submitAddTrainer">
                        <i class="fa-solid fa-plus"></i>
                        Add Trainer
                    </button>
                </div>
            </div>
        </div>

        <!-- Add Staff Modal -->
        <div class="modal-overlay" id="add-staff-modal" role="dialog" aria-labelledby="addStaffTitle" aria-hidden="true">
            <div class="modal-card">
                <div class="modal-header">
                    <h2 id="addStaffTitle">Add Staff Member</h2>
                    <button class="modal-close" data-close-modal aria-label="Close modal">&times;</button>
                </div>

                <div class="modal-body">
                    <!-- Error/Success Messages -->
                    <div id="addStaffError" class="modal-error" style="display: none;"></div>
                    <div id="addStaffSuccess" class="modal-success" style="display: none;"></div>

                    <form id="addStaffForm">
                        <div class="modal-grid">
                            <!-- Full Name (Required) -->
                            <div class="field">
                                <label for="staffName">Full Name *</label>
                                <input type="text"
                                       id="staffName"
                                       name="name"
                                       placeholder="e.g. Sara Johnson"
                                       required>
                            </div>

                            <!-- Email (Required) -->
                            <div class="field">
                                <label for="staffEmail">Email *</label>
                                <input type="email"
                                       id="staffEmail"
                                       name="email"
                                       placeholder="sarah.j@gymflow.com"
                                       required>
                            </div>

                            <!-- Phone (Required) -->
                            <div class="field">
                                <label for="staffPhone">Phone *</label>
                                <input type="tel"
                                       id="staffPhone"
                                       name="phone"
                                       placeholder="(416) 555-0101"
                                       required>
                            </div>

                            <!-- Emergency Contact (Optional) -->
                            <div class="field">
                                <label for="staffEmergencyContact">Emergency Contact *</label>
                                <input type="text"
                                       id="staffEmergencyContact"
                                       name="emergency_contact"
                                       placeholder="e.g. Mike Johnson">
                            </div>

                            <!-- Emergency Phone -->
                            <div class="field">
                                <label for="staffEmergencyPhone">Emergency Phone *</label>
                                <input type="tel"
                                       id="staffEmergencyPhone"
                                       name="emergency_phone"
                                       placeholder="(416) 555-0199">
                            </div>

                            <!-- Role (Required) -->
                            <div class="field">
                                <label for="staffRole">Role *</label>
                                <select id="staffRole" name="role" required>
                                    <option value="">Select role...</option>
                                    <option value="Front Desk CSR">Front Desk CSR</option>
                                    <option value="Sales">Sales</option>
                                    <option value="Operations">Operations</option>
                                    <option value="Manager">Manager</option>
                                    <option value="Admin">Admin</option>
                                </select>
                            </div>

                            <!-- Location (Required) - Populated by JavaScript -->
                            <div class="field">
                                <label for="staffLocationSelect">Location *</label>
                                <select id="staffLocationSelect" name="location_id" required>
                                    <option value="">Select location...</option>
                                    <!-- Options populated by JavaScript -->
                                </select>
                            </div>

                            <!-- Hire Date (Required) -->
                            <div class="field">
                                <label for="staffHireDate">Hire Date *</label>
                                <input type="date"
                                       id="staffHireDate"
                                       name="hire_date"
                                       required>
                            </div>

                            <!-- Hourly Rate (Optional) -->
                            <div class="field">
                                <label for="staffHourlyRate">Hourly Rate ($)</label>
                                <input type="number"
                                       id="staffHourlyRate"
                                       name="hourly_rate"
                                       placeholder="e.g. 22.50"
                                       step="0.01"
                                       min="0">
                            </div>
                        </div>

                        <!-- Notes (Optional) -->
                        <div class="field">
                            <label for="staffNotes">Notes</label>
                            <textarea id="staffNotes"
                                      name="notes"
                                      rows="3"
                                      placeholder="Certifications, languages, special skills, etc."></textarea>
                        </div>
                    </form>
                </div>

                <!-- Footer -->
                <div class="modal-footer">
                    <button class="btn ghost" data-close-modal type="button">Cancel</button>
                    <button class="btn primary" type="submit" form="addStaffForm" id="submitAddStaff">
                        <i class="fa-solid fa-plus"></i>
                            Add Staff Member
                    </button>
                </div>
            </div>
        </div>

        <!-- Slide-Out Panel: Staff Details -->
        <div class="slide-panel-overlay" id="staffDetailPanel">
            <div class="slide-panel">

                <!-- Header: Staff name, email, close button -->
                <div class="slide-panel-header">
                    <div class="slide-panel-info">
                        <div class="slide-panel-label">Staff Profile</div>
                        <div class="slide-panel-name" id="panelStaffName">---</div>
                        <div class="slide-panel-id" id="panelStaffID">---</div>
                    </div>
                    <button class="slide-panel-close" id="closeStaffPanel" aria-label="Close panel">
                        &times;
                    </button>
                </div>

                <!-- Body: Staff details -->
                <div class="slide-panel-body">

                    <!-- VIEW MODE (Read-Only) -->
                    <div class="slide-panel-view">

                        <!-- Detail Rows -->
                        <div class="slide-panel-row">
                            <span class="slide-panel-key">Email</span>
                            <span class="slide-panel-value" id="panelStaffEmailAddress">---</span>
                        </div>

                        <div class="slide-panel-row">
                            <span class="slide-panel-key">Phone</span>
                            <span class="slide-panel-value" id="panelStaffPhone">---</span>
                        </div>

                        <div class="slide-panel-row">
                            <span class="slide-panel-key">Role</span>
                            <span class="slide-panel-value" id="panelStaffRole">---</span>
                        </div>

                        <div class="slide-panel-row">
                            <span class="slide-panel-key">Location</span>
                            <span class="slide-panel-value" id="panelStaffLocation">---</span>
                        </div>

                        <div class="slide-panel-row">
                            <span class="slide-panel-key">Hire Date</span>
                            <span class="slide-panel-value" id="panelStaffHireDate">---</span>
                        </div>

                        <div class="slide-panel-row">
                            <span class="slide-panel-key">Status</span>
                            <span class="slide-panel-value" id="panelStaffStatus">
                                <span class="pill check">---</span>
                            </span>
                        </div>

                        <div class="slide-panel-row">
                            <span class="slide-panel-key">Employment Duration</span>
                            <span class="slide-panel-value" id="panelStaffDuration">---</span>
                        </div>

                        <!-- Trainer-Specific Section -->
                        <!-- JavaScript shows/hides this based on staff.role -->
                        <div id="trainerSpecificSection" style="display: none;">

                            <!-- Section Divider -->
                            <div class="slide-panel-divider">
                                <span>Trainer Details</span>
                            </div>

                            <div class="slide-panel-row">
                                <span class="slide-panel-key">Specialty</span>
                                <span class="slide-panel-value" id="detailSpecialty">---</span>
                            </div>

                            <div class="slide-panel-row">
                                <span class="slide-panel-key">Hourly Rate</span>
                                <span class="slide-panel-value" id="detailHourlyRate">---</span>
                            </div>
                        </div>

                    </div>
                    <!-- End of slide-panel-view -->
                    
                    <!-- EDIT MODE (Form) -->
                    <div class="slide-panel-edit">

                        <!-- Error/Success Message -->
                        <div id="editErrorMessage" class="slide-panel-error" style="display: none;"></div>
                        <div id="editSuccessMessage" class="slide-panel-success" style="display: none;"></div>

                        <form id="editStaffForm" class="slide-panel-form">

                            <!-- Staff ID (Hidden) -->
                            <input type="hidden" id="editStaffId">

                            <!-- Name -->
                            <div class="slide-panel-field required">
                                <label for="editName">Full Name</label>
                                <input type="text" id="editName" name="name" required>
                            </div>

                            <!-- Email -->
                            <div class="slide-panel-field required">
                                <label for="editEmail">Email Address</label>
                                <input type="email" id="editEmail" name="email" required>
                            </div>

                            <!-- Phone -->
                            <div class="slide-panel-field">
                                <label for="editPhone">Phone Number</label>
                                <input type="tel" id="editPhone" name="phone" placeholder="(555) 123-4567">
                            </div>

                            <!-- Emergency Contact -->
                            <div class="slide-panel-field">
                                <label for="editEmergencyContact">Emergency Contact</label>
                                <input type="text" id="editEmergencyContact" name="emergency_contact" placeholder="Emergency contact name">
                            </div>

                            <!-- Emergency Phone -->
                            <div class="slide-panel-field">
                                <label for="editEmergencyPhone">Emergency Phone</label>
                                <input type="tel" id="editEmergencyPhone" name="emergency_phone" placeholder="(555) 987-6543">
                            </div>

                            <!-- Role -->
                            <div class="slide-panel-field required">
                                <label for="editRole">Role</label>
                                <select id="editRole" name="role" required>
                                    <option value="">Select role...</option>
                                    <option value="Front Desk CSR">Front Desk CSR</option>
                                    <option value="Sales">Sales</option>
                                    <option value="Trainer">Trainer</option>
                                    <option value="Operations">Operations</option>
                                    <option value="Manager">Manager</option>
                                    <option value="Admin">Admin</option>
                                </select>
                            </div>

                            <!-- Specialty (Trainers Only) -->
                            <div class="slide-panel-field required" id="editSpecialtyField" style="display: none;">
                                <label for="editSpecialty">Specialty</label>
                                <select id="editSpecialty" name="specialty">
                                    <option value="">Select specialty...</option>
                                    <option value="Strength">Strength</option>
                                    <option value="Hypertrophy">Hypertrophy</option>
                                    <option value="Weight Loss">Weight Loss</option>
                                    <option value="Conditioning">Conditioning</option>
                                    <option value="Yoga / Mobility">Yoga / Mobility</option>
                                </select>
                            </div>

                            <!-- Location -->
                            <div class="slide-panel-field required">
                                <label for="editLocation">Location</label>
                                <select id="editLocation" name="location_id" required>
                                    <!-- Options populated by JavaScript -->
                                </select>
                            </div>

                            <!-- Hire Date -->
                            <div class="slide-panel-field required">
                                <label for="editHireDate">Hire Date</label>
                                <input type="date" id="editHireDate" name="hire_date" required>
                            </div>

                            <!-- Hourly Rate -->
                            <div class="slide-panel-field">
                                <label for="editHourlyRate">Hourly Rate ($)</label>
                                <input type="number" id="editHourlyRate" name="hourly_rate" step="0.01" min="0" placeholder="0.00">
                            </div>

                            <!-- Status -->
                            <div class="slide-panel-field required">
                                <label for="editStatus">Status</label>
                                <select id="editStatus" name="status" required>
                                    <option value="active">Active</option>
                                    <option value="on_leave">On Leave</option>
                                    <option value="inactive">Inactive</option>
                                    <option value="terminated">Terminated</option>
                                </select>
                            </div>

                            <!-- Notes -->
                            <div class="slide-panel-field">
                                <label for="editNotes">Notes</label>
                                <textarea id="editNotes" name="notes" rows="3" placeholder="Certifications, special skills, etc"></textarea>
                            </div>

                        </form>

                    </div>
                    <!-- End of slide-panel-edit -->
                    
                    <!-- DELETE MODE (Confirmation) -->
                    <div class="slide-panel-delete">

                        <!-- Error/Success Message -->
                        <div id="deleteErrorMessage" class="slide-panel-error" style="display: none;"></div>
                        <div id="deleteSuccessMessage" class="slide-panel-success" style="display: none;"></div>

                        <!-- Warning Banner -->
                        <div class="delete-warning-banner">
                            <i class="fa-solid fa-triangle-exclamation"></i>
                            <div>
                                <strong>Warning: This action will remove the staff member</strong>
                                <p>The staff member will be permanently deleted from the system. This action cannot be undone.</p>
                            </div>
                        </div>

                        <!-- Staff Info Being Deleted -->
                        <div class="delete-member-info">
                            <div class="delete-info-label">Removing Staff Member:</div>
                            <div class="delete-info-name" id="deleteStaffName">---</div>
                            <div class="delete-info-id" id="deleteStaffEmail">---</div>
                            <div class="delete-info-details" id="deleteStaffDetails">---</div>
                        </div>

                        <form id="deleteStaffForm" class="slide-panel-form" novalidate>

                           <!-- Reason for Deletion -->
                            <div class="slide-panel-field required">
                                <label for="deleteReason">Reason for Removal</label>
                                <select id="deleteReason" name="reason" required>
                                    <option value="">Select reason...</option>
                                    <option value="Resignation">Resignation</option>
                                    <option value="Termination">Termination</option>
                                    <option value="Retirement">Retirement</option>
                                    <option value="Relocation">Relocation</option>
                                    <option value="Performance Issues">Performance Issues</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>

                            <!-- Optional Notes -->
                            <div class="slide-panel-field">
                                <label for="deleteNotes">Additional Notes (Optional)</label>
                                <textarea id="deleteNotes" name="notes" rows="3" placeholder="Any additional context about this removal..."></textarea>
                            </div>

                            <!-- Admin Authentication -->
                            <div class="delete-auth-section">
                                <div class="delete-auth-header">
                                    <i class="fa-solid fa-shield-halved"></i>
                                    <span>Admin Authentication Required</span>
                                </div>

                                <div class="slide-panel-field required">
                                    <label for="deleteAdminUsername">Admin Username</label>
                                    <input type="text" id="deleteAdminUsername" name="admin_username" value="admin" required autocomplete="username">
                                </div>

                                <div class="slide-panel-field required">
                                    <label for="deleteAdminPassword">Admin Password</label>
                                    <input type="password" id="deleteAdminPassword" name="admin_password" required autocomplete="current-password" placeholder="Enter your admin password">
                                </div>
                            </div>

                            <!-- Confirmation Checkbox -->
                            <div class="delete-confirmation">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="deleteConfirmCheckbox" required>
                                    <span>I understand this will permanently delete the staff member from the system</span>
                                </label>
                            </div>

                        </form>

                    </div>
                    <!-- End of slide-panel-delete -->
                    
                    </div>
                <!-- End of slide-panel-body -->

                <!-- Footer: Action buttons -->
                <div class="slide-panel-footer" id="panelFooter">

                    <!-- VIEW MODE BUTTONS -->
                    <div id="viewModeButtons">
                        <button class="btn primary" id="editStaffBtn">
                            <i class="fa-solid fa-pen"></i>
                            Edit
                        </button>

                        <button class="btn ghost danger" id="deleteStaffBtn">
                            <i class="fa-solid fa-trash"></i>
                            Delete
                        </button>
                     </div>

                    <!-- EDIT MODE BUTTONS -->
                    <div id="editModeButtons" style="display: none;">
                        <button type="button" class="btn ghost cancel" id="cancelEditBtn">
                            <i class="fa-solid fa-times"></i>
                            Cancel
                        </button>
                        <button type="submit" class="btn primary" id="saveEditBtn">
                            <i class="fa-solid fa-check"></i>
                            Save Changes
                        </button>
                    </div>

                    <!-- DELETE MODE BUTTONS -->
                    <div id="deleteModeButtons" style="display: none;">
                        <button type="button" class="btn ghost cancel" id="cancelDeleteBtn">
                            <i class="fa-solid fa-times"></i>
                            Cancel
                        </button>
                        <button type="submit" class="btn danger" id="confirmDeleteBtn" disabled>
                            <i class="fa-solid fa-trash"></i>
                            Confirm Delete
                        </button>
                    </div>

                </div>

            </div>
        </div>

        <!-- ============================================
             SCHEDULE MODAL
             Big centered modal for managing staff schedules
             ============================================ -->

        <div class="schedule-modal-overlay" id="scheduleModal">
            <div class="modal-container large">

                <!-- Modal Header -->
                <div class="modal-header">
                    <div>
                        <h2 id="scheduleModalTitle">Schedule Overview</h2>
                        <p class="modal-subtitle" id="scheduleModalSubtitle">Manage staff shifts and coverage</p>
                    </div>
                    <button class="modal-close" id="closeScheduleModal">
                        <i class="fa-solid fa-times"></i>
                    </button>
                </div>

                <!-- Modal Body -->
                <div class="modal-body">

                    <!-- Filters & Controls -->
                    <div class="schedule-controls">
                        <div class="schedule-controls-left">
                            <!-- Week Navigation -->
                            <div class="week-nav">
                                <button class="btn ghost small" id="prevWeek">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </button>
                                <span class="current-week" id="currentWeekDisplay">Week of Jan 15 - Jan 21, 2026</span>
                                <button class="btn ghost small" id="nextWeek">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </button>
                                <button class="btn ghost small" id="todayBtn">Today</button>
                            </div>
                        </div>

                        <div class="schedule-controls-right">
                            <!-- Staff Filter (only shows in global view) -->
                            <select id="scheduleStaffFilter" class="form-select">
                                <option value="all">All Staff</option>
                                <!-- Populated by JavaScript -->
                            </select>

                            <!-- Location Filter -->
                            <select id="scheduleLocationFilter" class="form-select">
                                <option value="all">All Locations</option>
                                <!-- Populated by JavaScript -->
                            </select>

                            <!-- Add Shift Button -->
                            <button class="btn primary" id="addShiftBtn">
                                <i class="fa-solid fa-plus"></i>
                                Add Shift
                            </button>
                        </div>
                    </div>

                    <!-- Coverage Stats -->
                    <div class="coverage-stats">
                        <div class="coverage-stat-card">
                            <div class="coverage-stat-icon success">
                                <i class="fa-solid fa-user-check"></i>
                            </div>
                            <div class="coverage-stat-info">
                                <span class="coverage-stat-label">Full Covered</span>
                                <span class="coverage-stat-value" id="fullyCoveredShifts">0</span>
                            </div>
                        </div>

                        <div class="coverage-stat-card">
                            <div class="coverage-stat-icon warning">
                                <i class="fa-solid fa-exclamation-triangle"></i>
                            </div>
                            <div class="coverage-stat-info">
                                <span class="coverage-stat-label">Understaffed</span>
                                <span class="coverage-stat-value" id="understaffedShifts">0</span>
                            </div>
                        </div>

                        <div class="coverage-stat-card">
                            <div class="coverage-stat-icon danger">
                                <i class="fa-solid fa-circle-exclamation"></i>
                            </div>
                            <div class="coverage-stat-info">
                                <span class="coverage-stat-label">No Coverage</span>
                                <span class="coverage-stat-value" id="noCoverageShifts">0</span>
                            </div>
                        </div>

                        <div class="coverage-stat-card">
                            <div class="coverage-stat-icon info">
                                <i class="fa-solid fa-users"></i>
                            </div>
                            <div class="coverage-stat-info">
                                <span class="coverage-stat-label">Total Shifts</span>
                                <span class="coverage-stat-value" id="totalShifts">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Weekly Calendar Grid -->
                    <div class="schedule-calendar">
                        <div class="calendar-header">
                            <div class="time-column-header">Time</div>
                            <div class="day-column-header">Monday</div>
                            <div class="day-column-header">Tuesday</div>
                            <div class="day-column-header">Wednesday</div>
                            <div class="day-column-header">Thursday</div>
                            <div class="day-column-header">Friday</div>
                            <div class="day-column-header">Saturday</div>
                            <div class="day-column-header">Sunday</div>
                        </div>

                        <!-- Calendar body will be populated by JavaScript -->
                        <div class="calendar-body" id="scheduleCalendarBody">
                            <!-- Time slots and shifts rendered here -->
                        </div>
                    </div>

                </div>

            </div>
        </div>

        <!-- ============================================ 
             ADD/EDIT SHIFT MODAL
             Nested modal for adding/editing individual shifts
             ============================================ -->

        <div class="schedule-modal-overlay" id="shiftFormModal">
            <div class="modal-container medium">

                <!-- Modal Header -->
                <div class="modal-header">
                    <div>
                        <h2 id="shiftFormTitle">Add Shift</h2>
                        <p class="modal-subtitle">Schedule a new shift</p>
                    </div>
                    <button class="modal-close" id="closeShiftFormModal">
                        <i class="fa-solid fa-times"></i>
                    </button>
                </div>

                <!-- Modal Body -->
                <div class="modal-body">

                    <!-- Error/Success Messages -->
                    <div id="shiftFormError" class="modal-error" style="display: none;"></div>
                    <div id="shiftFormSuccess" class="modal-success" style="display: none;"></div>

                    <form id="shiftForm">
                        <!-- Hidden ID for editing -->
                        <input type="hidden" id="shiftId">

                        <div class="modal-grid">
                            <!-- Staff Member -->
                            <div class="field">
                                <label for="shiftStaff">Staff Member *</label>
                                <select id="shiftStaff" name="staff_id" required>
                                    <option value="">Select staff member...</option>
                                    <!-- Populated by JavaScript -->
                                </select>
                            </div>

                            <!-- Location -->
                            <div class="field">
                                <label for="shiftLocation">Location *</label>
                                <select id="shiftLocation" name="location_id" required>
                                    <option value="">Select location...</option>
                                    <!-- Populated by JavaScript -->
                                </select>
                            </div>

                            <!-- Date -->
                             <div class="field">
                                <label for="shiftDate">Date *</label>
                                <input type="date" id="shiftDate" name="shift_date" required>
                             </div>

                             <!-- Start Time -->
                            <div class="field">
                                <label for="shiftStartTime">Start Time *</label>
                                <input type="time" id="shiftStartTime" name="start_time" required>
                            </div>

                            <!-- End Time -->
                            <div class="field">
                                <label for="shiftEndTime">End Time *</label>
                                <input type="time" id="shiftEndTime" name="end_time" required>
                            </div>

                            <!-- Role/Position -->
                            <div class="field">
                                <label for="shiftRole">Position *</label>
                                <select id="shiftRole" name="role" required>
                                    <option value="">Select position...</option>
                                    <option value="Front Desk CSR">Front Desk CSR</option>
                                    <option value="Sales">Sales</option>
                                    <option value="Manager">Manager</option>
                                    <option value="Operations">Operations</option>
                                </select>
                            </div>
                        </div>

                        <!-- Notes -->
                        <div class="field">
                            <label for="shiftNotes">Notes (Optional)</label>
                            <textarea id="shiftNotes" name="notes" rows="3" placeholder="Any special instructions or notes..."></textarea>
                        </div>

                    </form>

                </div>

                <!-- Modal Footer -->
                <div class="modal-footer">
                    <button type="button" class="btn ghost" id="cancelShiftBtn">Cancel</button>
                    <button type="button" class="btn primary" id="saveShiftBtn">
                        <i class="fa-solid fa-save"></i>
                        Save Shift
                    </button>
                </div>

            </div>


        </div>

        <!-- ============================================ 
             SHIFT DETAIL MODAL
             View shift details before editing
             ============================================ -->

        <div class="schedule-modal-overlay" id="shiftDetailModal">
            <div class="modal-container medium">

                <!-- Modal Header -->
                <div class="modal-header">
                    <div>
                        <h2 id="shiftDetailTitle">Shift Details</h2>
                        <p class="modal-subtitle" id="shiftDetailSubtitle">View shift information</p>
                    </div>
                    <button class="modal-close" id="closeShiftDetailModal">
                        <i class="fa-solid fa-times"></i>
                    </button>
                </div>

                <!-- Modal Body -->
                <div class="modal-body">

                    <!-- Shift Info Grid -->
                    <div class="shift-detail-grid">

                        <!-- Date & Time Section -->
                        <div class="shift-detail-section">
                            <div class="shift-detail-icon">
                                <i class="fa-solid fa-calendar-day"></i>
                            </div>
                            <div class="shift-detail-content">
                                <label>Date</label>
                                <p id="shiftDetailDate">Monday, January 20, 2026</p>
                            </div>
                        </div>

                        <div class="shift-detail-section">
                            <div class="shift-detail-icon">
                                <i class="fa-solid fa-clock"></i>
                            </div>
                            <div class="shift-detail-content">
                                <label>Time</label>
                                <p id="shiftDetailTime">9:00 AM - 5:00 PM (8 hours)</p>
                            </div>
                        </div>

                        <!-- Staff Section -->
                        <div class="shift-detail-section">
                            <div class="shift-detail-icon">
                                <i class="fa-solid fa-user"></i>
                            </div>
                            <div class="shift-detail-content">
                                <label>Staff Member</label>
                                <p id="shiftDetailStaff">Sarah Johnson</p>
                            </div>
                        </div>

                        <!-- Role Section -->
                        <div class="shift-detail-section">
                            <div class="shift-detail-icon">
                                <i class="fa-solid fa-briefcase"></i>
                            </div>
                            <div class="shift-detail-content">
                                <label>Position</label>
                                <p id="shiftDetailRole">Front Desk CSR</p>
                            </div>
                        </div>

                        <!-- Location Section -->
                        <div class="shift-detail-section">
                            <div class="shift-detail-icon">
                                <i class="fa-solid fa-location-dot"></i>
                            </div>
                            <div class="shift-detail-content">
                                <label>Location</label>
                                <p id="shiftDetailLocation">Downtown</p>
                            </div>
                        </div>

                        <!-- Status Section -->
                        <div class="shift-detail-section">
                            <div class="shift-detail-icon">
                                <i class="fa-solid fa-circle-check"></i>
                            </div>
                            <div class="shift-detail-content">
                                <label>Status</label>
                                <p id="shiftDetailStatus">
                                    <span class="pill success">Scheduled</span>
                                </p>
                            </div>
                        </div>

                    </div>

                    <!-- Notes Section (Full Width) -->
                    <div class="shift-detail-notes">
                        <label><i class="fa-solid fa-note-sticky"></i> Notes</label>
                        <p id="shiftDetailNotes">Opening shift</p>
                    </div>

                </div>

                <!-- Modal Footer -->
                <div class="modal-footer">
                    <button type="button" class="btn ghost" id="closeShiftDetailBtn">Close</button>
                    <button type="button" class="btn ghost danger" id="deleteShiftFormDetailBtn">
                        <i class="fa-solid fa-trash"></i>
                        Delete
                    </button>
                    <button type="button" class="btn primary" id="editShiftFormDetailBtn">
                        <i class="fa-solid fa-pen"></i>
                        Edit Shift
                    </button>
                </div>

            </div>
        </div>

        <!-- ============================================
             DELETE SHIFT CONFIRMATION MODAL
             Confirmation with admin verification
             ============================================ -->

        <div class="schedule-modal-overlay" id="deleteShiftModal">
            <div class="modal-container medium">

                <!-- Modal Header -->
                <div class="modal-header">
                    <div>
                        <h2>Delete Shift</h2>
                        <p class="modal-subtitle">This action cannot be undone</p>
                    </div>
                    <button class="modal-close" id="closeDeleteShiftModal">
                        <i class="fa-solid fa-times"></i>
                    </button>
                </div>

                <!-- Modal Body -->
                <div class="modal-body">

                    <!-- Error/Success Messages -->
                    <div id="deleteShiftError" class="modal-error" style="display: none;"></div>
                    <div id="deleteShiftSuccess" class="modal-success" style="display: none;"></div>

                    <!-- Shift Info to Delete -->
                    <div class="delete-shift-info">
                        <div class="delete-shift-icon">
                            <i class="fa-solid fa-calendar-xmark"></i>
                        </div>
                        <div class="delete-shift-details">
                            <h3 id="deleteShiftStaffName">Sarah Johnson</h3>
                            <p id="deleteShiftDateTime">Monday, Jan 20  9:00 AM - 5:00 PM</p>
                            <p id="deleteShiftRoleLocation">Front Desk CSR  Downtown</p>
                        </div>
                    </div>

                    <!-- Delete Form -->
                    <form id="deleteShiftForm">

                        <!-- Reason for Deletion -->
                        <div class="field">
                            <label for="deleteShiftReason">Reason for Deletion *</label>
                            <select id="deleteShiftReason" name="reason" required>
                                <option value="">Select reason...</option>
                                <option value="schedule_change">Schedule Change</option>
                                <option value="staff_unavailable">Staff Unavailable</option>
                                <option value="shift_covered">Shift Already Covered</option>
                                <option value="error">Created in Error</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <!-- Optional Notes -->
                        <div class="field">
                            <label for="deleteShiftNotes">Additional Notes (Optional)</label>
                            <textarea id="deleteShiftNotes" name="notes" rows="3" placeholder="Provide additional context..."></textarea>
                        </div>

                        <!-- Admin Verification -->
                        <div class="admin-verification-section">
                            <h4><i class="fa-solid fa-shield-halved"></i>Admin Verification</h4>

                            <div class="field">
                                <label for="deleteShiftAdminUsername">Admin Username *</label>
                                <input type="text" id="deleteShiftAdminUsername" name="admin_username" required autocomplete="username">
                            </div>

                            <div class="field">
                                <label for="deleteShiftAdminPassword">Admin Password *</label>
                                <input type="password" id="deleteShiftAdminPassword" name="admin_password" required autocomplete="current-password">
                            </div>
                        </div>

                        <!-- Confirmation Checkbox -->
                        <div class="field checkbox-field">
                            <label class="checkbox-label">
                                <input type="checkbox" id="deleteShiftConfirmCheckbox" required>
                                <span>I understand this action cannot be undone</span>
                            </label>
                        </div>

                    </form>

                </div>

                <!-- Modal Footer -->
                <div class="modal-footer">
                    <button type="button" class="btn ghost" id="cancelDeleteShiftBtn">Cancel</button>
                    <button type="button" class="btn danger" id="confirmDeleteShiftBtn" disabled>
                        <i class="fa-solid fa-trash"></i>
                        Delete Shift
                    </button>
                </div>

            </div>
        </div>


        <!-- ============================================
             CHECK-IN NOTIFICATION CONTAINER
             Displays success notifications when members check in
             ============================================ -->

        <div id="checkInNotifications" class="check-in-notifications"></div>

        <!-- ============================================ 
             JAVASCRIPT FILES
             ============================================ -->
        <!-- Shared JS: Used by all admin pages -->
        <script src="../js/main.js"></script>
        <script src="../js/sidebar.js"></script>
        <script src="../js/modals.js"></script>
        <script src="../js/shared.js"></script>

        <!-- Staff-specific JS: Fetch and display staff data -->
        <script src="../js/pages/staff.js"></script>

    </body>
</html>